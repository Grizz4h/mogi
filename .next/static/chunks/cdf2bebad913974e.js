(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23261,e=>{"use strict";var i=e.i(43476),t=e.i(71645);function n(){(0,t.useEffect)(()=>{"undefined"!=typeof document&&(document.cookie.split(";").some(e=>"admin=1"===e.trim())||(window.location.href="/admin/login"))},[]);let[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[o,d]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(""),[p,h]=(0,t.useState)("all");async function b(){a(!0),d(null);try{let e=await fetch("/api/admin/ideas"),i=await e.json();n(i.ideas||[])}catch(e){d(e?.message||"Fehler beim Laden")}finally{a(!1)}}async function g(e){await fetch(`/api/admin/ideas/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"release"})}),b()}async function x(e){l(e.id),u(e.text)}async function f(e){if(c.trim())try{await fetch(`/api/admin/ideas/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c})}),l(null),b()}catch(e){alert("Fehler beim Speichern")}}function y(){l(null),u("")}async function m(e){if(confirm("Idee wirklich löschen?"))try{await fetch(`/api/admin/ideas/${e}`,{method:"DELETE"}),b()}catch(e){alert("Fehler beim Löschen")}}let j=e.filter(e=>"all"===p||e.status===p);return(0,t.useEffect)(()=>{b()},[]),(0,i.jsxs)("main",{style:{maxWidth:600,margin:"40px auto",padding:"0 14px"},children:[(0,i.jsx)("h1",{children:"Ideen Moderation"}),(0,i.jsxs)("div",{style:{marginBottom:20,display:"flex",gap:8},children:[(0,i.jsxs)("button",{onClick:()=>h("all"),style:{padding:"8px 16px",background:"all"===p?"#4a9eff":"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:["Alle (",e.length,")"]}),(0,i.jsxs)("button",{onClick:()=>h("pending"),style:{padding:"8px 16px",background:"pending"===p?"#4a9eff":"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:["Pending (",e.filter(e=>"pending"===e.status).length,")"]}),(0,i.jsxs)("button",{onClick:()=>h("release"),style:{padding:"8px 16px",background:"release"===p?"#4a9eff":"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:["Freigegeben (",e.filter(e=>"release"===e.status).length,")"]})]}),r&&(0,i.jsx)("div",{children:"Lade..."}),o&&(0,i.jsx)("div",{style:{color:"red"},children:o}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0},children:j.map(e=>(0,i.jsx)("li",{style:{margin:"16px 0",padding:12,border:"1px solid #ccc",borderRadius:8,background:"release"===e.status?"rgba(100,200,100,0.1)":"rgba(200,100,100,0.1)"},children:s===e.id?(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),style:{width:"100%",padding:8,borderRadius:4,border:"1px solid #999",fontFamily:"inherit",fontSize:14,minHeight:80,boxSizing:"border-box"}}),(0,i.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8},children:[(0,i.jsx)("button",{onClick:()=>f(e.id),style:{padding:"8px 12px",background:"#4a9eff",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Speichern"}),(0,i.jsx)("button",{onClick:y,style:{padding:"8px 12px",background:"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Abbrechen"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{marginBottom:8,fontSize:14},children:e.text}),(0,i.jsxs)("div",{style:{marginBottom:8,fontSize:12,color:"#999"},children:["Status: ",e.status]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,i.jsx)("button",{onClick:()=>x(e),style:{padding:"6px 12px",background:"#4a9eff",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Editieren"}),(0,i.jsx)("button",{onClick:()=>g(e.id),disabled:"release"===e.status,style:{padding:"6px 12px",background:"release"===e.status?"#666":"#52c41a",color:"white",border:"none",borderRadius:4,cursor:"release"===e.status?"not-allowed":"pointer",opacity:"release"===e.status?.6:1},children:"release"===e.status?"Freigegeben":"Freigeben"}),(0,i.jsx)("button",{onClick:()=>m(e.id),style:{padding:"6px 12px",background:"#ff4d4f",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Löschen"})]})]})},e.id))})]})}e.s(["default",()=>n])}]);