{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/admin/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\ninterface Idea {\n  id: string;\n  text: string;\n  status: string;\n  createdAt: string;\n}\n\nexport default function AdminIdeas() {\n  // Clientseitiger Admin-Check\n  useEffect(() => {\n    if (typeof document !== \"undefined\") {\n      const isAdmin = document.cookie.split(\";\").some((c) => c.trim() === \"admin=1\");\n      if (!isAdmin) {\n        window.location.href = \"/admin/login\";\n      }\n    }\n  }, []);\n\n  const [ideas, setIdeas] = useState<Idea[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [editId, setEditId] = useState<string | null>(null);\n  const [editText, setEditText] = useState(\"\");\n  const [filter, setFilter] = useState<\"all\" | \"pending\" | \"release\">(\"all\");\n\n  async function fetchIdeas() {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/admin/ideas\");\n      const data = await res.json();\n      setIdeas(data.ideas || []);\n    } catch (e: any) {\n      setError(e?.message || \"Fehler beim Laden\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function releaseIdea(id: string) {\n    await fetch(`/api/admin/ideas/${id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ status: \"release\" }),\n    });\n    fetchIdeas();\n  }\n\n  async function startEdit(idea: Idea) {\n    setEditId(idea.id);\n    setEditText(idea.text);\n  }\n\n  async function saveEdit(id: string) {\n    if (!editText.trim()) return;\n    try {\n      await fetch(`/api/admin/ideas/${id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ text: editText }),\n      });\n      setEditId(null);\n      fetchIdeas();\n    } catch (e) {\n      alert(\"Fehler beim Speichern\");\n    }\n  }\n\n  function cancelEdit() {\n    setEditId(null);\n    setEditText(\"\");\n  }\n\n  async function deleteIdea(id: string) {\n    if (!confirm(\"Idee wirklich löschen?\")) return;\n    try {\n      await fetch(`/api/admin/ideas/${id}`, {\n        method: \"DELETE\",\n      });\n      fetchIdeas();\n    } catch (e) {\n      alert(\"Fehler beim Löschen\");\n    }\n  }\n\n  const filteredIdeas = ideas.filter(idea => {\n    if (filter === \"all\") return true;\n    return idea.status === filter;\n  });\n\n  useEffect(() => {\n    fetchIdeas();\n  }, []);\n\n  return (\n    <main style={{ maxWidth: 600, margin: \"40px auto\", padding: \"0 14px\" }}>\n      <h1>Ideen Moderation</h1>\n      <div style={{ marginBottom: 20, display: \"flex\", gap: 8 }}>\n        <button\n          onClick={() => setFilter(\"all\")}\n          style={{\n            padding: \"8px 16px\",\n            background: filter === \"all\" ? \"#4a9eff\" : \"#666\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: 4,\n            cursor: \"pointer\",\n          }}\n        >\n          Alle ({ideas.length})\n        </button>\n        <button\n          onClick={() => setFilter(\"pending\")}\n          style={{\n            padding: \"8px 16px\",\n            background: filter === \"pending\" ? \"#4a9eff\" : \"#666\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: 4,\n            cursor: \"pointer\",\n          }}\n        >\n          Pending ({ideas.filter(i => i.status === \"pending\").length})\n        </button>\n        <button\n          onClick={() => setFilter(\"release\")}\n          style={{\n            padding: \"8px 16px\",\n            background: filter === \"release\" ? \"#4a9eff\" : \"#666\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: 4,\n            cursor: \"pointer\",\n          }}\n        >\n          Freigegeben ({ideas.filter(i => i.status === \"release\").length})\n        </button>\n      </div>\n      {loading && <div>Lade...</div>}\n      {error && <div style={{ color: \"red\" }}>{error}</div>}\n      <ul style={{ listStyle: \"none\", padding: 0 }}>\n        {filteredIdeas.map((idea) => (\n          <li\n            key={idea.id}\n            style={{\n              margin: \"16px 0\",\n              padding: 12,\n              border: \"1px solid #ccc\",\n              borderRadius: 8,\n              background: idea.status === \"release\" ? \"rgba(100,200,100,0.1)\" : \"rgba(200,100,100,0.1)\",\n            }}\n          >\n            {editId === idea.id ? (\n              <div style={{ marginBottom: 12 }}>\n                <textarea\n                  value={editText}\n                  onChange={(e) => setEditText(e.target.value)}\n                  style={{\n                    width: \"100%\",\n                    padding: 8,\n                    borderRadius: 4,\n                    border: \"1px solid #999\",\n                    fontFamily: \"inherit\",\n                    fontSize: 14,\n                    minHeight: 80,\n                    boxSizing: \"border-box\",\n                  }}\n                />\n                <div style={{ marginTop: 8, display: \"flex\", gap: 8 }}>\n                  <button\n                    onClick={() => saveEdit(idea.id)}\n                    style={{\n                      padding: \"8px 12px\",\n                      background: \"#4a9eff\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 4,\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    Speichern\n                  </button>\n                  <button\n                    onClick={cancelEdit}\n                    style={{\n                      padding: \"8px 12px\",\n                      background: \"#666\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 4,\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    Abbrechen\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <>\n                <div style={{ marginBottom: 8, fontSize: 14 }}>{idea.text}</div>\n                <div style={{ marginBottom: 8, fontSize: 12, color: \"#999\" }}>\n                  Status: {idea.status}\n                </div>\n                <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\" }}>\n                  <button\n                    onClick={() => startEdit(idea)}\n                    style={{\n                      padding: \"6px 12px\",\n                      background: \"#4a9eff\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 4,\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    Editieren\n                  </button>\n                  <button\n                    onClick={() => releaseIdea(idea.id)}\n                    disabled={idea.status === \"release\"}\n                    style={{\n                      padding: \"6px 12px\",\n                      background: idea.status === \"release\" ? \"#666\" : \"#52c41a\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 4,\n                      cursor: idea.status === \"release\" ? \"not-allowed\" : \"pointer\",\n                      opacity: idea.status === \"release\" ? 0.6 : 1,\n                    }}\n                  >\n                    {idea.status === \"release\" ? \"Freigegeben\" : \"Freigeben\"}\n                  </button>\n                  <button\n                    onClick={() => deleteIdea(idea.id)}\n                    style={{\n                      padding: \"6px 12px\",\n                      background: \"#ff4d4f\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 4,\n                      cursor: \"pointer\",\n                    }}\n                  >\n                    Löschen\n                  </button>\n                </div>\n              </>\n            )}\n          </li>\n        ))}\n      </ul>\n    </main>\n  );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}