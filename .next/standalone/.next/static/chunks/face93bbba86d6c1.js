(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),n=e.i(71645);let s=(e,t,n)=>Math.max(t,Math.min(n,e));function i(){let[e,i]=(0,n.useState)(""),[a,r]=(0,n.useState)(!1),l=(0,n.useRef)(null),[c,o]=(0,n.useState)([]),[d,u]=(0,n.useState)(0),[m,h]=(0,n.useState)(!0),[p,x]=(0,n.useState)(null),[y,f]=(0,n.useState)(0),[b,g]=(0,n.useState)(!1),[j,v]=(0,n.useState)("none"),[N,w]=(0,n.useState)(220),[S,C]=(0,n.useState)(!1),[T,I]=(0,n.useState)(!1),M=(0,n.useRef)(null),z=(0,n.useRef)(null),D=(0,n.useRef)(null),P=(0,n.useRef)(null),k=(0,n.useRef)(null),$=c[d];(0,n.useMemo)(()=>b?y>30?"yes":y<-30?"no":"none":"none",[y,b]);let R=(0,n.useMemo)(()=>b?s(Math.abs(y)/170,0,1):0,[y,b]),O=y>0?"yes":"no",W=(0,n.useMemo)(()=>10*Math.max(-1,Math.min(1,y/(.5*window.innerWidth))),[y]);async function A(){h(!0),x(null);try{let e=await fetch("/api/ideas",{cache:"no-store"});if(!e.ok)throw Error(`API ${e.status}`);let t=await e.json();o(t.ideas??[]),u(0),f(0)}catch(e){x(e?.message??"Fehler beim Laden")}finally{h(!1)}}async function E(t){t&&t.preventDefault();let n=e.trim();if(n){r(!0);try{(await fetch("/api/ideas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n})})).ok&&(i(""),await A(),setTimeout(()=>{l.current&&l.current.blur()},100))}finally{r(!1)}}}async function Y(e,t){o(n=>n.map(n=>n.id!==e?n:{...n,yesCount:"yes"===t?n.yesCount+1:n.yesCount,noCount:"no"===t?n.noCount+1:n.noCount}));try{await fetch("/api/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,dir:t})})}catch{}}async function L(e){$&&(await Y($.id,e),v("throw"),f("yes"===e?900:-900),g(!1),setTimeout(()=>{v("none"),C(!0),setTimeout(()=>{f(0),g(!1),C(!1),I(!0),u(e=>Math.min(e+1,c.length)),setTimeout(()=>I(!1),200)},400)},320))}function X(e){if(!b)return;if(null!=D.current)try{e.currentTarget.releasePointerCapture(D.current)}catch{}let t=Math.abs(y),n=null,i=Date.now(),a=k.current?i-k.current:null;if(null!==a&&a<120&&t>60?n=y>0?"yes":"no":t>=170&&(n=y>0?"yes":"no"),!n){let e=Math.round(220+180*s(Math.abs(y)/(.6*window.innerWidth),0,1));w(e),v("snap"),f(0),g(!1),M.current=null,z.current=null,D.current=null,P.current=null,k.current=null,setTimeout(()=>v("none"),e+40);return}v("throw"),f(y>0?900:-900),g(!1),setTimeout(()=>{v("none"),L(n)},320),M.current=null,z.current=null,D.current=null,P.current=null,k.current=null}(0,n.useEffect)(()=>{A()},[]);let B=(0,t.jsxs)("form",{onSubmit:E,style:{width:"100%",maxWidth:520,margin:"0 auto 12px auto",display:"flex",gap:8,alignItems:"center",justifyContent:"center"},autoComplete:"off",children:[(0,t.jsx)("input",{ref:l,type:"text",className:"input",placeholder:"Neue Idee eingebenâ€¦",value:e,onChange:e=>i(e.target.value),maxLength:120,disabled:a,style:{flex:1,minWidth:0,fontSize:16,padding:"12px 14px",borderRadius:16,border:"1px solid var(--border)",background:"rgba(255,255,255,0.08)",color:"var(--text)",outline:"none",boxShadow:"none"}}),(0,t.jsx)("button",{type:"submit",className:"btn",style:{minWidth:44,fontSize:18,padding:"12px 16px"},disabled:a||!e.trim(),children:"âž•"})]});if(m)return(0,t.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[B,(0,t.jsx)("div",{className:"card",style:{display:"grid",placeItems:"center",marginTop:12},children:(0,t.jsx)("div",{style:{color:"var(--muted)",position:"relative",zIndex:1},children:"Lade Ideenâ€¦"})})]});if(p)return(0,t.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[B,(0,t.jsxs)("div",{className:"card",style:{display:"grid",gap:12,placeItems:"center",marginTop:12},children:[(0,t.jsxs)("div",{style:{position:"relative",zIndex:1,textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontWeight:800},children:"Fehler"}),(0,t.jsx)("div",{style:{color:"var(--muted)",marginTop:6},children:p})]}),(0,t.jsx)("button",{className:"btn",onClick:A,children:"â†» Neu laden"})]})]});if(!$)return(0,t.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",minHeight:360},children:[B,(0,t.jsx)("div",{className:"card",style:{display:"grid",placeItems:"center",marginTop:12},children:(0,t.jsxs)("div",{style:{position:"relative",zIndex:1,textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontWeight:900,fontSize:20},children:"Durchgeswiped."}),(0,t.jsx)("div",{style:{color:"var(--muted)",marginTop:8},children:"Du hast alle Ideen fÃ¼r jetzt gesehen."})]})}),(0,t.jsxs)("div",{className:"actions",style:{marginTop:16,marginBottom:0},children:[(0,t.jsx)("button",{className:"btn",onClick:A,children:"â†» Neu laden"}),(0,t.jsx)("button",{className:"btn",onClick:()=>window.location.href="/",children:"â†© Start"})]})]});let F="none",K={};b||(F="snap"===j?"transform 320ms cubic-bezier(0.22, 1, 0.36, 1), box-shadow 320ms cubic-bezier(0.22, 1, 0.36, 1)":"throw"===j?"transform 260ms cubic-bezier(.6,-0.28,.74,.05), box-shadow 220ms cubic-bezier(.6,-0.28,.74,.05)":"transform 320ms cubic-bezier(0.22, 1, 0.36, 1), box-shadow 320ms cubic-bezier(0.22, 1, 0.36, 1)"),T&&(K={transform:"scale(0.93)",opacity:.25,transition:"transform 180ms cubic-bezier(0.22, 1, 0.36, 1), opacity 180ms cubic-bezier(0.22, 1, 0.36, 1)",willChange:"transform, opacity"},setTimeout(()=>{let e=document.querySelector('.card:not([style*="pointer-events: none"])');e&&(e.style.transform="scale(1)",e.style.opacity="1")},10));let U={transform:`translateX(${y}px) rotate(${W*("throw"===j?1.18:1)}deg) scale(${b?1.012:1})`,transition:F,boxShadow:b?"0 24px 64px 0 rgba(0,0,0,0.60), 0 2px 8px 0 rgba(0,0,0,0.10)":"var(--shadow)",...!S&&T?K:{}},H={opacity:"yes"===O?R:0,transform:`scale(${.9+.1*R})`,transition:b?"none":"opacity 200ms ease, transform 200ms ease"},J={opacity:"no"===O?R:0,transform:`scale(${.9+.1*R})`,transition:b?"none":"opacity 200ms ease, transform 200ms ease"},q=y>0?"rgba(64,255,150,0.7)":y<0?"rgba(255,90,120,0.7)":"rgba(120,120,255,0.5)",G=s(Math.abs(y)/170,0,1),V=.08*y,Q={position:"absolute",top:"50%",left:"50%",width:"180%",height:"180%",transform:`translate(-50%, -50%) scale(${1+.08*G}) translateX(${V}px)`,pointerEvents:"none",zIndex:0,opacity:b?.07+.13*G:0,background:`radial-gradient(ellipse at ${y>0?"60%":y<0?"40%":"50%"} 50%, ${q}, transparent 70%)`,transition:b?"none":"opacity 180ms cubic-bezier(.4,1.2,.4,1)",willChange:"opacity, transform"};return(0,t.jsxs)("div",{style:{width:"100%",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",minHeight:360},children:[B,(0,t.jsx)("div",{style:Q}),(0,t.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",width:"100%"},children:[!S&&$&&(0,t.jsxs)("div",{className:"card",style:U,onPointerDown:function(e){$&&(D.current=e.pointerId,e.currentTarget.setPointerCapture(e.pointerId),M.current=e.clientX,z.current=e.clientY,P.current=null,k.current=Date.now(),g(!0),v("none"))},onPointerMove:function(e){if(b&&null!=M.current&&null!=z.current){if(null==P.current){let t=e.clientX-M.current,n=e.clientY-z.current;if(!(Math.abs(t)>10||Math.abs(n)>10))return;Math.abs(t)>Math.abs(n)?P.current="swipe":P.current="scroll"}if("scroll"===P.current){g(!1),M.current=null,z.current=null,D.current=null,P.current=null;return}f(e.clientX-M.current),e.preventDefault()}},onPointerUp:X,onPointerCancel:X,children:[b&&(0,t.jsxs)("div",{className:"stampOverlay",children:[(0,t.jsx)("div",{className:"stampFancy stampYes",style:H,children:"âœ“ YES"}),(0,t.jsx)("div",{className:"stampFancy stampNo",style:J,children:"âœ• NOPE"})]}),(0,t.jsxs)("div",{className:"cardTop",children:[(0,t.jsx)("div",{className:"badge",children:"Antrag"}),(0,t.jsxs)("div",{className:"pills",children:[(0,t.jsxs)("div",{className:"pill",children:["ðŸ‘ ",$.yesCount]}),(0,t.jsxs)("div",{className:"pill",children:["ðŸ‘Ž ",$.noCount]})]})]}),(0,t.jsx)("div",{className:"ideaText",children:$.text}),(0,t.jsxs)("div",{className:"hint",children:[(0,t.jsx)("span",{children:"â†"}),(0,t.jsx)("span",{children:"â†’"})]})]}),S&&$&&(0,t.jsxs)("div",{className:"card",style:{...U,pointerEvents:"none",zIndex:2},children:[(0,t.jsxs)("div",{className:"cardTop",children:[(0,t.jsx)("div",{className:"badge",children:"Antrag"}),(0,t.jsxs)("div",{className:"pills",children:[(0,t.jsxs)("div",{className:"pill",children:["ðŸ‘ ",$.yesCount]}),(0,t.jsxs)("div",{className:"pill",children:["ðŸ‘Ž ",$.noCount]})]})]}),(0,t.jsx)("div",{className:"ideaText",children:$.text}),(0,t.jsxs)("div",{className:"hint",children:[(0,t.jsx)("span",{children:"â† nope"}),(0,t.jsx)("span",{children:"yes â†’"})]})]}),(0,t.jsxs)("div",{className:"actions",children:[(0,t.jsx)("button",{className:"btn btnNo",onClick:()=>L("no"),disabled:S,children:"ðŸ‘Ž Nope"}),(0,t.jsx)("button",{className:"btn btnYes",onClick:()=>L("yes"),disabled:S,children:"ðŸ‘ Yes"})]})]})]})}function a(){return(0,t.jsxs)("main",{className:"container",children:[(0,t.jsxs)("header",{className:"header",children:[(0,t.jsx)("img",{className:"logo",src:"/logo.png",alt:"Ministry of Good Idea Logo"}),(0,t.jsx)("p",{className:"subtitle",children:"Swipe. Schmunzeln. KopfschÃ¼tteln. Swipe."})]}),(0,t.jsx)("section",{className:"deckWrap",children:(0,t.jsx)(i,{})}),(0,t.jsx)("div",{className:"footer",children:"MVP Â· Mobile-first Â· Login spÃ¤ter Â· Ideen werden aus DB geladen"})]})}e.s(["default",()=>a],31713)}]);