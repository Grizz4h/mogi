module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},88367,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){(0,c.useEffect)(()=>{"undefined"!=typeof document&&(document.cookie.split(";").some(a=>"admin=1"===a.trim())||(window.location.href="/admin/login"))},[]);let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)("all");async function o(){f(!0),h(null);try{let a=await fetch("/api/admin/ideas"),b=await a.json();d(b.ideas||[])}catch(a){h(a?.message||"Fehler beim Laden")}finally{f(!1)}}async function p(a){await fetch(`/api/admin/ideas/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"release"})}),o()}async function q(a){j(a.id),l(a.text)}async function r(a){if(k.trim())try{await fetch(`/api/admin/ideas/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:k})}),j(null),o()}catch(a){alert("Fehler beim Speichern")}}function s(){j(null),l("")}async function t(a){if(confirm("Idee wirklich löschen?"))try{await fetch(`/api/admin/ideas/${a}`,{method:"DELETE"}),o()}catch(a){alert("Fehler beim Löschen")}}let u=a.filter(a=>"all"===m||a.status===m);return(0,c.useEffect)(()=>{o()},[]),(0,b.jsxs)("main",{style:{maxWidth:600,margin:"40px auto",padding:"0 14px"},children:[(0,b.jsx)("h1",{children:"Ideen Moderation"}),(0,b.jsxs)("div",{style:{marginBottom:20,display:"flex",gap:8},children:[(0,b.jsxs)("button",{onClick:()=>n("all"),style:{padding:"8px 16px",background:"all"===m?"#4a9eff":"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:["Alle (",a.length,")"]}),(0,b.jsxs)("button",{onClick:()=>n("pending"),style:{padding:"8px 16px",background:"pending"===m?"#4a9eff":"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:["Pending (",a.filter(a=>"pending"===a.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>n("release"),style:{padding:"8px 16px",background:"release"===m?"#4a9eff":"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:["Freigegeben (",a.filter(a=>"release"===a.status).length,")"]})]}),e&&(0,b.jsx)("div",{children:"Lade..."}),g&&(0,b.jsx)("div",{style:{color:"red"},children:g}),(0,b.jsx)("ul",{style:{listStyle:"none",padding:0},children:u.map(a=>(0,b.jsx)("li",{style:{margin:"16px 0",padding:12,border:"1px solid #ccc",borderRadius:8,background:"release"===a.status?"rgba(100,200,100,0.1)":"rgba(200,100,100,0.1)"},children:i===a.id?(0,b.jsxs)("div",{style:{marginBottom:12},children:[(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),style:{width:"100%",padding:8,borderRadius:4,border:"1px solid #999",fontFamily:"inherit",fontSize:14,minHeight:80,boxSizing:"border-box"}}),(0,b.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8},children:[(0,b.jsx)("button",{onClick:()=>r(a.id),style:{padding:"8px 12px",background:"#4a9eff",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Speichern"}),(0,b.jsx)("button",{onClick:s,style:{padding:"8px 12px",background:"#666",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Abbrechen"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{marginBottom:8,fontSize:14},children:a.text}),(0,b.jsxs)("div",{style:{marginBottom:8,fontSize:12,color:"#999"},children:["Status: ",a.status]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,b.jsx)("button",{onClick:()=>q(a),style:{padding:"6px 12px",background:"#4a9eff",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Editieren"}),(0,b.jsx)("button",{onClick:()=>p(a.id),disabled:"release"===a.status,style:{padding:"6px 12px",background:"release"===a.status?"#666":"#52c41a",color:"white",border:"none",borderRadius:4,cursor:"release"===a.status?"not-allowed":"pointer",opacity:"release"===a.status?.6:1},children:"release"===a.status?"Freigegeben":"Freigeben"}),(0,b.jsx)("button",{onClick:()=>t(a.id),style:{padding:"6px 12px",background:"#ff4d4f",color:"white",border:"none",borderRadius:4,cursor:"pointer"},children:"Löschen"})]})]})},a.id))})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d984dfed._.js.map